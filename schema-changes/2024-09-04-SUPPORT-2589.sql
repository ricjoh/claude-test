INSERT INTO Parameter VALUES ('D05C2544-E8BC-45C9-A3C8-3C7E3AD3F831', '2AD6C035-FD2C-4553-AAA8-E2B983DF46C1', 'SHIPPED', NULL, NULL, NULL, 'Offer is both sold and shipped.', '2025-12-31 00:00:00.000000', 0, '2024-06-27 14:54:08.000000', 'E87EA5C0-0152-419C-9D91-5438C7EC5C37', NULL, NULL);

-- ALTER TABLE BillOfLading ADD INDEX (OfferID, StatusPID);
-- ALTER TABLE BillOfLading ADD INDEX (OfferID);

-- Update Shipped STatus of all Offers where BOL exists and is shipped.
UPDATE Offer o
	JOIN BillOfLading b ON o.OfferID = b.OfferID
SET o.OfferStatusPID = 'D05C2544-E8BC-45C9-A3C8-3C7E3AD3F831'
WHERE b.StatusPID = '124B3F46-9F63-4256-AC3A-B8CB00656CC1'
	AND o.OfferStatusPID <> 'D05C2544-E8BC-45C9-A3C8-3C7E3AD3F831';


-- Update offers to shipped that have SaleDate < 7/4/2024
UPDATE Offer o
SET o.OfferStatusPID = 'D05C2544-E8BC-45C9-A3C8-3C7E3AD3F831'
WHERE o.OfferStatusPID = 'C5F3B7B9-9340-46B4-820A-504AC2A98A00'
	AND o.SaleDate < '2024-07-04';


SELECT COUNT(*) from Offer o
WHERE o.OfferStatusPID = 'C5F3B7B9-9340-46B4-820A-504AC2A98A00'
	AND o.SaleDate < '2024-07-04';
